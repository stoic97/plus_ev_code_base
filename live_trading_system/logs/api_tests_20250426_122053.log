2025-04-26 12:20:53,113 - __main__ - INFO - Starting API access tests
2025-04-26 12:20:53,122 - __main__ - INFO - Mock mode set to 'always' from command line
2025-04-26 12:20:59,197 - __main__ - INFO - Service availability status:
2025-04-26 12:20:59,197 - __main__ - INFO -   API: Not available
2025-04-26 12:20:59,198 - __main__ - INFO -   Database: Available
2025-04-26 12:20:59,198 - __main__ - INFO -   Kafka: Not available
2025-04-26 12:20:59,203 - financial_app.tests.integration.data_layer_e2e.utils.reporting - INFO - Test reporting initialized. Report directory: D:\e backup\web development\plusEv\plusEV_code_base\plus_ev_code_base\live_trading_system\financial_app\tests\integration\data_layer_e2e\reports\20250426_122050
2025-04-26 12:21:03,325 - financial_app.tests.integration.data_layer_e2e.test_api_access - INFO - Running in forced mock mode (MOCK_MODE=always)
2025-04-26 12:21:03,325 - financial_app.tests.integration.data_layer_e2e.test_api_access - INFO - Starting API access tests...
2025-04-26 12:21:09,483 - financial_app.tests.integration.data_layer_e2e.test_api_access - INFO - Service availability: API=False, Database=True, Kafka=False
2025-04-26 12:21:09,483 - financial_app.tests.integration.data_layer_e2e.test_api_access - INFO - Test mode: MOCK
2025-04-26 12:21:09,483 - financial_app.tests.integration.data_layer_e2e.test_api_access - INFO - Authenticating with API...
2025-04-26 12:21:09,483 - financial_app.tests.integration.data_layer_e2e.test_api_access - INFO - Using mock authentication
2025-04-26 12:21:09,483 - financial_app.tests.integration.data_layer_e2e.utils.reporting - INFO - Test 'api_authentication' completed with status: PASS
2025-04-26 12:21:09,493 - financial_app.tests.integration.data_layer_e2e.test_api_access - INFO - Running test: Latest Data Endpoint
2025-04-26 12:21:09,493 - financial_app.tests.integration.data_layer_e2e.test_api_access - INFO - Testing latest market data endpoint...
2025-04-26 12:21:09,493 - financial_app.tests.integration.data_layer_e2e.test_api_access - INFO - Latest data endpoint test passed for AAPL from NASDAQ (mock)
2025-04-26 12:21:09,497 - financial_app.tests.integration.data_layer_e2e.utils.reporting - INFO - Test 'api_latest_data_AAPL_NASDAQ' completed with status: PASS
2025-04-26 12:21:09,500 - financial_app.tests.integration.data_layer_e2e.test_api_access - INFO - Latest data endpoint test passed for MSFT from NASDAQ (mock)
2025-04-26 12:21:09,505 - financial_app.tests.integration.data_layer_e2e.utils.reporting - INFO - Test 'api_latest_data_MSFT_NASDAQ' completed with status: PASS
2025-04-26 12:21:09,505 - financial_app.tests.integration.data_layer_e2e.test_api_access - INFO - Latest data endpoint test passed for BTC/USD from COINBASE (mock)
2025-04-26 12:21:09,513 - financial_app.tests.integration.data_layer_e2e.utils.reporting - INFO - Test 'api_latest_data_BTC/USD_COINBASE' completed with status: PASS
2025-04-26 12:21:09,514 - financial_app.tests.integration.data_layer_e2e.test_api_access - INFO - Test passed: Latest Data Endpoint
2025-04-26 12:21:09,515 - financial_app.tests.integration.data_layer_e2e.test_api_access - INFO - Running test: Historical Data Endpoint
2025-04-26 12:21:09,515 - financial_app.tests.integration.data_layer_e2e.test_api_access - INFO - Testing historical market data endpoint...
2025-04-26 12:21:09,517 - financial_app.tests.integration.data_layer_e2e.test_api_access - INFO - Historical data endpoint test passed for AAPL from NASDAQ for last_hour (mock)
2025-04-26 12:21:09,521 - financial_app.tests.integration.data_layer_e2e.utils.reporting - INFO - Test 'api_historical_data_AAPL_NASDAQ_last_hour' completed with status: PASS
2025-04-26 12:21:09,534 - financial_app.tests.integration.data_layer_e2e.test_api_access - INFO - Historical data endpoint test passed for AAPL from NASDAQ for last_day (mock)
2025-04-26 12:21:09,539 - financial_app.tests.integration.data_layer_e2e.utils.reporting - INFO - Test 'api_historical_data_AAPL_NASDAQ_last_day' completed with status: PASS
2025-04-26 12:21:09,546 - financial_app.tests.integration.data_layer_e2e.test_api_access - INFO - Historical data endpoint test passed for AAPL from NASDAQ for custom_range (mock)
2025-04-26 12:21:09,550 - financial_app.tests.integration.data_layer_e2e.utils.reporting - INFO - Test 'api_historical_data_AAPL_NASDAQ_custom_range' completed with status: PASS
2025-04-26 12:21:09,552 - financial_app.tests.integration.data_layer_e2e.test_api_access - INFO - Historical data endpoint test passed for MSFT from NASDAQ for last_hour (mock)
2025-04-26 12:21:09,556 - financial_app.tests.integration.data_layer_e2e.utils.reporting - INFO - Test 'api_historical_data_MSFT_NASDAQ_last_hour' completed with status: PASS
2025-04-26 12:21:09,565 - financial_app.tests.integration.data_layer_e2e.test_api_access - INFO - Historical data endpoint test passed for MSFT from NASDAQ for last_day (mock)
2025-04-26 12:21:09,570 - financial_app.tests.integration.data_layer_e2e.utils.reporting - INFO - Test 'api_historical_data_MSFT_NASDAQ_last_day' completed with status: PASS
2025-04-26 12:21:09,578 - financial_app.tests.integration.data_layer_e2e.test_api_access - INFO - Historical data endpoint test passed for MSFT from NASDAQ for custom_range (mock)
2025-04-26 12:21:09,581 - financial_app.tests.integration.data_layer_e2e.utils.reporting - INFO - Test 'api_historical_data_MSFT_NASDAQ_custom_range' completed with status: PASS
2025-04-26 12:21:09,582 - financial_app.tests.integration.data_layer_e2e.test_api_access - INFO - Historical data endpoint test passed for BTC/USD from COINBASE for last_hour (mock)
2025-04-26 12:21:09,587 - financial_app.tests.integration.data_layer_e2e.utils.reporting - INFO - Test 'api_historical_data_BTC/USD_COINBASE_last_hour' completed with status: PASS
2025-04-26 12:21:09,593 - financial_app.tests.integration.data_layer_e2e.test_api_access - INFO - Historical data endpoint test passed for BTC/USD from COINBASE for last_day (mock)
2025-04-26 12:21:09,600 - financial_app.tests.integration.data_layer_e2e.utils.reporting - INFO - Test 'api_historical_data_BTC/USD_COINBASE_last_day' completed with status: PASS
2025-04-26 12:21:09,603 - financial_app.tests.integration.data_layer_e2e.test_api_access - INFO - Historical data endpoint test passed for BTC/USD from COINBASE for custom_range (mock)
2025-04-26 12:21:09,612 - financial_app.tests.integration.data_layer_e2e.utils.reporting - INFO - Test 'api_historical_data_BTC/USD_COINBASE_custom_range' completed with status: PASS
2025-04-26 12:21:09,613 - financial_app.tests.integration.data_layer_e2e.test_api_access - INFO - Test passed: Historical Data Endpoint
2025-04-26 12:21:09,613 - financial_app.tests.integration.data_layer_e2e.test_api_access - INFO - Running test: Data Consistency
2025-04-26 12:21:09,613 - financial_app.tests.integration.data_layer_e2e.test_api_access - INFO - Testing data consistency between API and database...
2025-04-26 12:21:11,507 - financial_app.tests.integration.data_layer_e2e.test_api_access - INFO - Forced mock mode. Using mock data comparison.
2025-04-26 12:21:11,507 - financial_app.tests.integration.data_layer_e2e.test_api_access - INFO - Using mock data consistency check
2025-04-26 12:21:11,507 - financial_app.tests.integration.data_layer_e2e.test_api_access - ERROR - Data consistency test failed for AAPL from NASDAQ: only 0.00% match (mock)
2025-04-26 12:21:11,507 - financial_app.tests.integration.data_layer_e2e.utils.reporting - INFO - Test 'api_data_consistency_AAPL_NASDAQ' completed with status: FAIL
2025-04-26 12:21:11,512 - financial_app.tests.integration.data_layer_e2e.utils.reporting - ERROR - Test 'api_data_consistency_AAPL_NASDAQ' error: Data consistency check failed: only 0.00% match (mock)
2025-04-26 12:21:11,512 - financial_app.tests.integration.data_layer_e2e.test_api_access - ERROR - Data consistency test failed for MSFT from NASDAQ: only 0.00% match (mock)
2025-04-26 12:21:11,519 - financial_app.tests.integration.data_layer_e2e.utils.reporting - INFO - Test 'api_data_consistency_MSFT_NASDAQ' completed with status: FAIL
2025-04-26 12:21:11,521 - financial_app.tests.integration.data_layer_e2e.utils.reporting - ERROR - Test 'api_data_consistency_MSFT_NASDAQ' error: Data consistency check failed: only 0.00% match (mock)
2025-04-26 12:21:11,522 - financial_app.tests.integration.data_layer_e2e.test_api_access - ERROR - Data consistency test failed for BTC/USD from COINBASE: only 0.00% match (mock)
2025-04-26 12:21:11,527 - financial_app.tests.integration.data_layer_e2e.utils.reporting - INFO - Test 'api_data_consistency_BTC/USD_COINBASE' completed with status: FAIL
2025-04-26 12:21:11,528 - financial_app.tests.integration.data_layer_e2e.utils.reporting - ERROR - Test 'api_data_consistency_BTC/USD_COINBASE' error: Data consistency check failed: only 0.00% match (mock)
2025-04-26 12:21:11,529 - financial_app.tests.integration.data_layer_e2e.test_api_access - INFO - Retrying Data Consistency (attempt 2/3)...
2025-04-26 12:21:16,530 - financial_app.tests.integration.data_layer_e2e.test_api_access - INFO - Testing data consistency between API and database...
2025-04-26 12:21:16,549 - financial_app.tests.integration.data_layer_e2e.test_api_access - INFO - Forced mock mode. Using mock data comparison.
2025-04-26 12:21:16,549 - financial_app.tests.integration.data_layer_e2e.test_api_access - INFO - Using mock data consistency check
2025-04-26 12:21:16,549 - financial_app.tests.integration.data_layer_e2e.test_api_access - ERROR - Data consistency test failed for AAPL from NASDAQ: only 0.00% match (mock)
2025-04-26 12:21:16,554 - financial_app.tests.integration.data_layer_e2e.utils.reporting - INFO - Test 'api_data_consistency_AAPL_NASDAQ' completed with status: FAIL
2025-04-26 12:21:16,554 - financial_app.tests.integration.data_layer_e2e.utils.reporting - ERROR - Test 'api_data_consistency_AAPL_NASDAQ' error: Data consistency check failed: only 0.00% match (mock)
2025-04-26 12:21:16,558 - financial_app.tests.integration.data_layer_e2e.test_api_access - ERROR - Data consistency test failed for MSFT from NASDAQ: only 0.00% match (mock)
2025-04-26 12:21:16,563 - financial_app.tests.integration.data_layer_e2e.utils.reporting - INFO - Test 'api_data_consistency_MSFT_NASDAQ' completed with status: FAIL
2025-04-26 12:21:16,563 - financial_app.tests.integration.data_layer_e2e.utils.reporting - ERROR - Test 'api_data_consistency_MSFT_NASDAQ' error: Data consistency check failed: only 0.00% match (mock)
2025-04-26 12:21:16,564 - financial_app.tests.integration.data_layer_e2e.test_api_access - ERROR - Data consistency test failed for BTC/USD from COINBASE: only 0.00% match (mock)
2025-04-26 12:21:16,570 - financial_app.tests.integration.data_layer_e2e.utils.reporting - INFO - Test 'api_data_consistency_BTC/USD_COINBASE' completed with status: FAIL
2025-04-26 12:21:16,571 - financial_app.tests.integration.data_layer_e2e.utils.reporting - ERROR - Test 'api_data_consistency_BTC/USD_COINBASE' error: Data consistency check failed: only 0.00% match (mock)
2025-04-26 12:21:16,571 - financial_app.tests.integration.data_layer_e2e.test_api_access - INFO - Retrying Data Consistency (attempt 3/3)...
2025-04-26 12:21:21,572 - financial_app.tests.integration.data_layer_e2e.test_api_access - INFO - Testing data consistency between API and database...
2025-04-26 12:21:21,586 - financial_app.tests.integration.data_layer_e2e.test_api_access - INFO - Forced mock mode. Using mock data comparison.
2025-04-26 12:21:21,588 - financial_app.tests.integration.data_layer_e2e.test_api_access - INFO - Using mock data consistency check
2025-04-26 12:21:21,589 - financial_app.tests.integration.data_layer_e2e.test_api_access - ERROR - Data consistency test failed for AAPL from NASDAQ: only 0.00% match (mock)
2025-04-26 12:21:21,597 - financial_app.tests.integration.data_layer_e2e.utils.reporting - INFO - Test 'api_data_consistency_AAPL_NASDAQ' completed with status: FAIL
2025-04-26 12:21:21,598 - financial_app.tests.integration.data_layer_e2e.utils.reporting - ERROR - Test 'api_data_consistency_AAPL_NASDAQ' error: Data consistency check failed: only 0.00% match (mock)
2025-04-26 12:21:21,599 - financial_app.tests.integration.data_layer_e2e.test_api_access - ERROR - Data consistency test failed for MSFT from NASDAQ: only 0.00% match (mock)
2025-04-26 12:21:21,604 - financial_app.tests.integration.data_layer_e2e.utils.reporting - INFO - Test 'api_data_consistency_MSFT_NASDAQ' completed with status: FAIL
2025-04-26 12:21:21,607 - financial_app.tests.integration.data_layer_e2e.utils.reporting - ERROR - Test 'api_data_consistency_MSFT_NASDAQ' error: Data consistency check failed: only 0.00% match (mock)
2025-04-26 12:21:21,608 - financial_app.tests.integration.data_layer_e2e.test_api_access - ERROR - Data consistency test failed for BTC/USD from COINBASE: only 0.00% match (mock)
2025-04-26 12:21:21,613 - financial_app.tests.integration.data_layer_e2e.utils.reporting - INFO - Test 'api_data_consistency_BTC/USD_COINBASE' completed with status: FAIL
2025-04-26 12:21:21,614 - financial_app.tests.integration.data_layer_e2e.utils.reporting - ERROR - Test 'api_data_consistency_BTC/USD_COINBASE' error: Data consistency check failed: only 0.00% match (mock)
2025-04-26 12:21:21,619 - financial_app.tests.integration.data_layer_e2e.test_api_access - ERROR - Test failed after 3 retries: Data Consistency
2025-04-26 12:21:21,619 - financial_app.tests.integration.data_layer_e2e.test_api_access - INFO - Running test: Error Handling
2025-04-26 12:21:21,620 - financial_app.tests.integration.data_layer_e2e.test_api_access - INFO - Testing API error handling...
2025-04-26 12:21:21,621 - financial_app.tests.integration.data_layer_e2e.test_api_access - INFO - Testing error case: invalid_symbol
2025-04-26 12:21:21,622 - financial_app.tests.integration.data_layer_e2e.test_api_access - INFO - Error handling test passed for invalid_symbol (mock)
2025-04-26 12:21:21,627 - financial_app.tests.integration.data_layer_e2e.utils.reporting - INFO - Test 'api_error_handling_invalid_symbol' completed with status: PASS
2025-04-26 12:21:21,627 - financial_app.tests.integration.data_layer_e2e.test_api_access - INFO - Testing error case: missing_parameter
2025-04-26 12:21:21,627 - financial_app.tests.integration.data_layer_e2e.test_api_access - INFO - Error handling test passed for missing_parameter (mock)
2025-04-26 12:21:21,635 - financial_app.tests.integration.data_layer_e2e.utils.reporting - INFO - Test 'api_error_handling_missing_parameter' completed with status: PASS
2025-04-26 12:21:21,635 - financial_app.tests.integration.data_layer_e2e.test_api_access - INFO - Testing error case: invalid_date_format
2025-04-26 12:21:21,637 - financial_app.tests.integration.data_layer_e2e.test_api_access - INFO - Error handling test passed for invalid_date_format (mock)
2025-04-26 12:21:21,641 - financial_app.tests.integration.data_layer_e2e.utils.reporting - INFO - Test 'api_error_handling_invalid_date_format' completed with status: PASS
2025-04-26 12:21:21,642 - financial_app.tests.integration.data_layer_e2e.test_api_access - INFO - Testing error case: future_date
2025-04-26 12:21:21,642 - financial_app.tests.integration.data_layer_e2e.test_api_access - INFO - Error handling test passed for future_date (mock)
2025-04-26 12:21:21,650 - financial_app.tests.integration.data_layer_e2e.utils.reporting - INFO - Test 'api_error_handling_future_date' completed with status: PASS
2025-04-26 12:21:21,650 - financial_app.tests.integration.data_layer_e2e.test_api_access - INFO - Testing error case: unauthorized_access
2025-04-26 12:21:21,650 - financial_app.tests.integration.data_layer_e2e.test_api_access - INFO - Error handling test passed for unauthorized_access (mock)
2025-04-26 12:21:21,660 - financial_app.tests.integration.data_layer_e2e.utils.reporting - INFO - Test 'api_error_handling_unauthorized_access' completed with status: PASS
2025-04-26 12:21:21,661 - financial_app.tests.integration.data_layer_e2e.test_api_access - INFO - Test passed: Error Handling
2025-04-26 12:21:21,663 - financial_app.tests.integration.data_layer_e2e.test_api_access - INFO - API access tests completed. Some tests failed.
2025-04-26 12:21:21,668 - financial_app.tests.integration.data_layer_e2e.utils.reporting - INFO - Test report finalized with overall status: FAIL
2025-04-26 12:21:21,668 - financial_app.tests.integration.data_layer_e2e.utils.reporting - INFO - Report available at: D:\e backup\web development\plusEv\plusEV_code_base\plus_ev_code_base\live_trading_system\financial_app\tests\integration\data_layer_e2e\reports\20250426_122050
2025-04-26 12:21:21,668 - __main__ - INFO - Performance Metrics:
2025-04-26 12:21:21,671 - __main__ - INFO - api_authentication_ms: avg=120.00ms, p95=120.00ms
2025-04-26 12:21:21,672 - __main__ - INFO - api_response_time_ms: avg=90.67ms, p95=98.00ms
2025-04-26 12:21:21,673 - __main__ - INFO - api_latest_data_ms: avg=7.12ms, p95=9.56ms
2025-04-26 12:21:21,674 - __main__ - INFO - api_historical_response_time_last_hour_ms: avg=112.50ms, p95=112.50ms
2025-04-26 12:21:21,675 - __main__ - INFO - api_historical_data_last_hour_ms: avg=5.55ms, p95=6.12ms
2025-04-26 12:21:21,676 - __main__ - INFO - api_historical_response_time_last_day_ms: avg=400.00ms, p95=400.00ms
2025-04-26 12:21:21,676 - __main__ - INFO - api_historical_data_last_day_ms: avg=14.22ms, p95=18.12ms
2025-04-26 12:21:21,676 - __main__ - INFO - api_historical_response_time_custom_range_ms: avg=400.00ms, p95=400.00ms
2025-04-26 12:21:21,676 - __main__ - INFO - api_historical_data_custom_range_ms: avg=12.01ms, p95=12.97ms
2025-04-26 12:21:21,677 - __main__ - INFO - api_data_fetch_ms: avg=0.08ms, p95=0.70ms
2025-04-26 12:21:21,677 - __main__ - INFO - db_data_fetch_ms: avg=0.00ms, p95=0.00ms
2025-04-26 12:21:21,677 - __main__ - INFO - API access tests completed with FAILURE
